# vCAD WASM Demo

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä egui –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤ WebAssembly.

## –ß—Ç–æ —ç—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ **desktop GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Rust (egui) –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ** —á–µ—Ä–µ–∑ WASM.

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π UI —Å –º–µ–Ω—é, –ø–∞–Ω–µ–ª—è–º–∏, toolbar
- ‚úÖ –¢–∞–∫–æ–π –∂–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–∞–∫ –≤ desktop –≤–µ—Ä—Å–∏–∏
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (localStorage)
- ‚úÖ Responsive layout

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Trunk (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):
```bash
cargo install --locked trunk
```

### 2. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
cd wasm-demo
trunk serve --release --open
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä –Ω–∞ http://127.0.0.1:8080

### –¢–æ–ª—å–∫–æ —Å–±–æ—Ä–∫–∞ (–±–µ–∑ –∑–∞–ø—É—Å–∫–∞):
```bash
trunk build --release
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –≤ `dist/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- `src/main.rs` - –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (egui)
- `index.html` - HTML –æ–±–æ–ª–æ—á–∫–∞ –¥–ª—è canvas
- `Cargo.toml` - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `Trunk.toml` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±–æ—Ä–∫–∏

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **Rust –∫–æ–¥** –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ WASM
2. **Trunk** —Å–æ–∑–¥–∞–µ—Ç HTML/JS –æ–±–µ—Ä—Ç–∫—É
3. **egui** —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤ `<canvas>` —á–µ—Ä–µ–∑ WebGL
4. **–ë—Ä–∞—É–∑–µ—Ä** –∑–∞–ø—É—Å–∫–∞–µ—Ç WASM –º–æ–¥—É–ª—å

## –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ vCAD

–≠—Ç–æ—Ç –∂–µ –ø–æ–¥—Ö–æ–¥ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è `crates/gui` (vcad-gui):

### ‚úÖ –ß—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:
- –í–µ—Å—å UI (–º–µ–Ω—é, –ø–∞–Ω–µ–ª–∏, –¥–µ—Ä–µ–≤–æ —Å—Ü–µ–Ω—ã)
- 3D —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (glow —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç WASM)
- –°–∫–µ—Ç—á–∏–Ω–≥
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
- Undo/Redo

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å:
- **File dialogs** (`rfd`) ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å web file picker API
- **AI Chat** (`tokio` async) ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `wasm-bindgen-futures`
- **manifold-rs** ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å WASM
- **vcad library** ‚Üí –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è —Å `--target wasm32`

### üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ vcad-gui:

1. –î–æ–±–∞–≤–∏—Ç—å conditional compilation –¥–ª—è WASM:
   ```rust
   #[cfg(target_arch = "wasm32")]
   fn main() {
       // WASM entry point
   }

   #[cfg(not(target_arch = "wasm32"))]
   fn main() {
       // Native entry point
   }
   ```

2. –û–±–Ω–æ–≤–∏—Ç—å `Cargo.toml`:
   ```toml
   [target.'cfg(target_arch = "wasm32")'.dependencies]
   wasm-bindgen-futures = "0.4"
   web-sys = "0.3"
   ```

3. –ó–∞–º–µ–Ω–∏—Ç—å –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   - `rfd` ‚Üí `web-sys` file input
   - `tokio` ‚Üí `wasm-bindgen-futures`

4. –°–æ–∑–¥–∞—Ç—å `index.html` –∏ `Trunk.toml`

5. –°–æ–±—Ä–∞—Ç—å: `trunk build --release`

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

WASM –≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ç–∞–∫ –∂–µ –±—ã—Å—Ç—Ä–æ –∫–∞–∫ native:
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥: —á–µ—Ä–µ–∑ WebGL (–∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ)
- CPU –æ–ø–µ—Ä–∞—Ü–∏–∏: WASM –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ –Ω–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥ –±—Ä–∞—É–∑–µ—Ä–æ–º
- –ü–∞–º—è—Ç—å: SharedArrayBuffer –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## Deploy

–ü–æ—Å–ª–µ `trunk build --release`:
```bash
dist/
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ wasm-demo-*.wasm
‚îî‚îÄ‚îÄ wasm-demo-*.js
```

–ú–æ–∂–Ω–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –Ω–∞ –ª—é–±–æ–º static —Ö–æ—Å—Ç–∏–Ω–≥–µ (GitHub Pages, Netlify, Vercel, etc.)
